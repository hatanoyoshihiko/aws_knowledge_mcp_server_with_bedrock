<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>AWS Knowledge MCP Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Markdown renderer (marked) -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css?v=20251222-1" />

  <!-- App JS -->
  <script src="./app.js?v=20251222-1" defer></script>
</head>

<body class="bg-slate-50 text-slate-900">
  <div class="max-w-5xl mx-auto p-5 md:p-8 space-y-6">
    <header class="space-y-3">
      <h1 class="text-2xl md:text-3xl font-bold">AWS Knowledge MCP Browser</h1>

      <div class="text-slate-700 bg-slate-50 border border-slate-200 rounded-xl p-3 md:p-4">
        <ul class="list-disc pl-5 space-y-1 text-sm md:text-base">
          <li><span class="font-semibold">search_documentation</span>: AWSãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢ï¼ˆtopicsã§çµã‚Šè¾¼ã¿å¯ï¼‰</li>
          <li><span class="font-semibold">askï¼ˆBedrockè¦ç´„ï¼‰</span>: æ¤œç´¢â†’ä¸Šä½ãƒšãƒ¼ã‚¸readâ†’Bedrockã§è¦ç´„ã—ã¦å›ç­”</li>
          <li><span class="font-semibold">read_documentation</span>: AWSãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆURLã‚’MarkdownåŒ–</li>
          <li><span class="font-semibold">recommend</span>: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆURLã«åŸºã¥ãé–¢é€£ãƒšãƒ¼ã‚¸æ¨è–¦</li>
          <li><span class="font-semibold">list_regions</span>: AWSãƒªãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§å–å¾—</li>
          <li><span class="font-semibold">get_regional_availability</span>: æŒ‡å®šãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®æä¾›çŠ¶æ³ï¼ˆproduct/api/cfnï¼‰</li>
        </ul>
      </div>
    </header>

    <!-- Main card -->
    <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6 space-y-5">
      <!-- Tool -->
      <div class="space-y-2">
        <label class="font-semibold">Tool</label>
        <select id="tool" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400">
          <option value="aws___search_documentation">search_documentation</option>
          <option value="aws___ask">askï¼ˆBedrockè¦ç´„ï¼‰</option>
          <option value="aws___read_documentation">read_documentation</option>
          <option value="aws___recommend">recommend</option>
          <option value="aws___list_regions">list_regions</option>
          <option value="aws___get_regional_availability">get_regional_availability</option>
        </select>
        <p class="text-xs text-slate-500">â€»UIã®Toolåã¯è¡¨ç¤ºç”¨ã§ã™ï¼ˆAPIå´ã§ /api/* ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ï¼‰</p>
      </div>

      <!-- Search phrase -->
      <div class="space-y-2" id="search-phrase-field">
        <label class="font-semibold">Search Phrase</label>
        <input id="searchPhrase" type="text" placeholder="ä¾‹: IAM ã®ä»•çµ„" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
      </div>

      <!-- Topics -->
      <div class="space-y-2" id="topics-field">
        <div class="flex items-end justify-between gap-3">
          <label class="font-semibold">Topicsï¼ˆä»»æ„ãƒ»æœ€å¤§3ï¼‰</label>
          <span id="topicsHint" class="hidden text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-md px-2 py-1">
            Topics ã¯æœ€å¤§3ã¤ã¾ã§ã§ã™
          </span>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2">
          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="general" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">general</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="reference_documentation" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">reference_documentation</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="current_awareness" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">current_awareness</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="troubleshooting" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">troubleshooting</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="amplify_docs" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">amplify_docs</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="cdk_docs" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">cdk_docs</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="cdk_constructs" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">cdk_constructs</span>
          </label>

          <label class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 cursor-pointer select-none hover:bg-slate-100">
            <input type="checkbox" name="topics" value="cloudformation" class="h-4 w-4 accent-sky-600" />
            <span class="font-medium">cloudformation</span>
          </label>
        </div>

        <p class="text-sm text-slate-600">limit ã¯ <span class="font-semibold">10 å›ºå®š</span> ã§ã™ã€‚</p>
      </div>

      <!-- Ask options -->
      <div class="space-y-2 hidden" id="ask-options-field">
        <label class="font-semibold">Ask optionsï¼ˆä»»æ„ï¼‰</label>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="space-y-1">
            <label class="text-sm font-semibold">read_top_kï¼ˆ0ã€œ5ï¼‰</label>
            <input id="askReadTopK" type="number" min="0" max="5" value="3" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
            <div class="text-xs text-slate-500">searchä¸Šä½Kä»¶ã‚’readã—ã¦æœ¬æ–‡ãƒ™ãƒ¼ã‚¹ã§è¦ç´„ã—ã¾ã™ï¼ˆãŠã™ã™ã‚: 3ï¼‰ã€‚</div>
          </div>

          <div class="space-y-1">
            <label class="text-sm font-semibold">read_max_lengthï¼ˆ500ã€œ20000ï¼‰</label>
            <input id="askReadMaxLen" type="number" min="500" max="20000" value="6000" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
            <div class="text-xs text-slate-500">1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®readé‡ï¼ˆãŠã™ã™ã‚: 6000ï¼‰ã€‚</div>
          </div>
        </div>
      </div>

      <!-- URL input (read/recommend) -->
      <div class="space-y-2 hidden" id="url-field">
        <label class="font-semibold">URL</label>
        <input id="urlInput" type="text" placeholder="https://docs.aws.amazon.com/..." class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
      </div>

      <!-- list_regions (no input) -->
      <div class="space-y-2 hidden" id="list-regions-field">
        <div class="rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700">
          å…¥åŠ›ã¯ä¸è¦ã§ã™ã€‚ã€Œå®Ÿè¡Œã€ã‚’æŠ¼ã™ã¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        </div>
      </div>

      <!-- get_regional_availability inputs (schema-based) -->
      <div class="space-y-3 hidden" id="regional-availability-field">

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="space-y-1">
            <label class="text-sm font-semibold">regionï¼ˆå¿…é ˆï¼‰</label>
            <input id="gaRegion" type="text" placeholder="ä¾‹: ap-northeast-1" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
            <div class="text-xs text-slate-500">list_regions ã§å–å¾—ã—ãŸ region_id ã‚’ãã®ã¾ã¾å…¥ã‚Œã¦ãã ã•ã„ã€‚</div>
          </div>

          <div class="space-y-1">
            <label class="text-sm font-semibold">resource_typeï¼ˆå¿…é ˆï¼‰</label>
            <select id="gaResourceType" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400">
              <option value="product">productï¼ˆè£½å“/æ©Ÿèƒ½ï¼‰</option>
              <option value="api">apiï¼ˆSDKã‚µãƒ¼ãƒ“ã‚¹/æ“ä½œï¼‰</option>
              <option value="cfn">cfnï¼ˆCloudFormationãƒªã‚½ãƒ¼ã‚¹ï¼‰</option>
            </select>
            <div class="text-xs text-slate-500">
              ä¾‹: product â†’ "Amazon S3" / api â†’ "EC2" or "IAM+GetSSHPublicKey" / cfn â†’ "AWS::Lambda::Function"
            </div>
          </div>
        </div>

        <div class="space-y-2">
          <label class="font-semibold">filtersï¼ˆä»»æ„ãƒ»è¤‡æ•°å¯ï¼‰</label>
          <input id="gaFilters" type="text" placeholder='ä¾‹: Amazon S3, Amazon EC2  /  ä¾‹(api): IAM+GetSSHPublicKey, EC2  /  ä¾‹(cfn): AWS::Lambda::Function' class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
          <div class="text-xs text-slate-500">ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šã§ãã¾ã™ï¼ˆé…åˆ—ã«å¤‰æ›ã—ã¦é€ä¿¡ã—ã¾ã™ï¼‰ã€‚</div>
        </div>

        <div class="space-y-2">
          <label class="font-semibold">next_tokenï¼ˆä»»æ„ï¼‰</label>
          <input id="gaNextToken" type="text" placeholder="filtersç„¡ã—ã§å…¨ä»¶å–å¾—ã™ã‚‹å ´åˆã«ã€æ¬¡ãƒšãƒ¼ã‚¸å–å¾—ã«ä½¿ã„ã¾ã™" class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400" />
        </div>

        <!-- JSON override -->
        <div class="space-y-2">
          <div class="flex items-end justify-between gap-3">
            <label class="font-semibold">JSONï¼ˆä»»æ„ãƒ»ä¸Šæ›¸ãï¼‰</label>
            <span id="jsonHint" class="hidden text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-md px-2 py-1">
              JSONãŒä¸æ­£ã§ã™ï¼ˆãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã§å®Ÿè¡Œã—ã¾ã™ï¼‰
            </span>
          </div>
          <textarea id="gaJson" rows="6" placeholder='ä¾‹: { "region": "ap-northeast-1", "resource_type": "cfn", "filters": ["AWS::Lambda::Function"] }' class="w-full rounded-lg border border-slate-300 px-3 py-2 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-sky-400"></textarea>
          <div class="text-xs text-slate-500">
            JSON ãŒæœ‰åŠ¹ãªã‚‰ JSON ã‚’å„ªå…ˆã—ã¾ã™ï¼ˆã‚¹ã‚­ãƒ¼ãƒ: region/resource_type å¿…é ˆï¼‰ã€‚
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-3">
        <button id="run" class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 font-semibold text-white hover:bg-sky-700 active:bg-sky-800">
          å®Ÿè¡Œ
        </button>

        <button id="clear" class="inline-flex items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-700 hover:bg-slate-50">
          ã‚¯ãƒªã‚¢
        </button>

        <span id="status" class="text-sm text-slate-600"></span>
      </div>
    </section>

    <!-- Result -->
    <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6 space-y-4">
      <div class="flex items-center justify-between gap-3">
        <h2 class="text-lg font-bold">çµæœ</h2>

        <!-- Copy Markdown (read_documentation only) -->
        <button id="copyBtn" class="hidden text-sm px-3 py-1.5 rounded-lg border border-slate-300 bg-white hover:bg-slate-100 active:bg-slate-200 transition">
          ğŸ“‹ Markdownã‚’ã‚³ãƒ”ãƒ¼
        </button>
      </div>

      <div id="render" class="space-y-3"></div>

      <details class="mt-4">
        <summary class="cursor-pointer text-sm text-slate-600">Rawï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰</summary>
        <pre id="raw" class="mt-2 whitespace-pre-wrap text-xs bg-slate-950 text-slate-100 rounded-lg p-4 overflow-auto max-h-[420px]"></pre>
      </details>
    </section>
  </div>
</body>
</html>
